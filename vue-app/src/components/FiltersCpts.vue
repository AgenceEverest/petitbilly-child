<script>
import AllFilterSvg from "./excerpts/AllFilterSvg.vue";
import SearchLoop from "./excerpts/SearchLoop.vue";
import SearchBox from "./excerpts/SearchBox.vue";
export default {
  name: "FiltersCpts",
  emits: ["handleClick", "filterElementsByKeyword"],
  components: {
    AllFilterSvg,
    SearchLoop,
    SearchBox,
  },
  props: {
    filters: {
      type: Array,
      default: () => [],
    },
    type_de_filtre: {
      type: String,
      default: "",
    },
    champs_texte_pour_affiner: {
      type: Boolean,
      default: false,
    },
    texte_pour_le_label_1: {
      type: String,
      default: "Type 1",
    },
    texte_pour_le_label_2: {
      type: String,
      default: "Type 2",
    },
    texte_pour_le_label_3: {
      type: String,
      default: "Type 3",
    },
    texte_pour_le_label_4: {
      type: String,
      default: "Type 4",
    },
    texte_tous_les_filtres_1: {
      type: String,
      default: "Tous les filtres",
    },
    texte_tous_les_filtres_2: {
      type: String,
      default: "Tous les filtres",
    },
    texte_tous_les_filtres_3: {
      type: String,
      default: "Tous les filtres",
    },
    texte_tous_les_filtres_4: {
      type: String,
      default: "Tous les filtres",
    },
  },

  data() {
    return {
      userEntry: "",
    };
  },
};
</script>

<template>
  <div class="filters">
    <!-- Filtre avec boutons -->
    <template v-if="this.type_de_filtre === 'boutons'">
      <div
        class="buttons"
        v-for="(filter, index) in filters"
        :key="filter.taxonomy"
      >
        <div
          :class="filter.isAllButtonToggled ? 'active' : ''"
          @click="
            () => {
              if (!filter.isAllButtonToggled) {
                $emit('handleClick', 'all', filter);
                filter.isAllButtonToggled = !filter.isAllButtonToggled;
              }
            }
          "
          class="button button-all-filters"
        >
          <span>
            {{ this.$props[`texte_tous_les_filtres_${index + 1}`] }}
          </span>
          <AllFilterSvg />
        </div>
        <div
          @click="$emit('handleClick', term.name, filter)"
          :class="term.active ? 'active' : ''"
          class="button"
          v-for="term in filter.terms"
          :key="term.id"
        >
          <span>
            {{ term.name }}
          </span>

          <svg
            preserveAspectRatio="none"
            xmlns="http://www.w3.org/2000/svg"
            width="126.705"
            height="49.779"
            viewBox="0 0 126.705 49.779"
          >
            <g
              id="Tracé_342"
              data-name="Tracé 342"
              transform="translate(4.095 0.511)"
              fill="none"
            >
              <path
                d="M38.526.109C68.481-1.71,68.892.874,89.757,2.693s18-2.533,27.382,4.69,4.637,26.36.883,33.947-7.839,7.938-26.941,7.938-29.19-1.424-48.361-2.588c-29.954-1.819-29.563,4.474-40.632-5.35S-2.769,8.3,2.09,2.693,8.572,1.927,38.526.109Z"
                stroke="none"
                class="bg-button-filter"
              />
              <path
                d="M 55.70505142211914 1.488597869873047 C 51.05695343017578 1.488658905029297 45.47733306884766 1.690258026123047 38.64734649658203 2.104915618896484 C 33.85643005371094 2.395778656005859 29.30924987792969 2.543258666992188 25.13211059570312 2.543258666992188 C 19.46694946289062 2.543258666992188 15.43064880371094 2.278636932373047 12.48345184326172 2.085418701171875 C 10.77657318115234 1.973495483398438 9.428390502929688 1.885116577148438 8.344329833984375 1.885116577148438 C 5.952651977539062 1.885116577148438 5.110366821289062 2.261157989501953 3.6009521484375 4.002758026123047 C 2.537071228027344 5.230297088623047 1.359733581542969 7.552818298339844 0.37078857421875 10.37481689453125 C -0.4183883666992188 12.62677764892578 -1.451766967773438 16.23381805419922 -1.89312744140625 20.62917709350586 C -2.295967102050781 24.64093780517578 -2.103607177734375 28.28411674499512 -1.32135009765625 31.45755767822266 C -0.448211669921875 34.99969863891602 1.146072387695312 37.81781768798828 3.417213439941406 39.8336181640625 C 5.947769165039062 42.07969665527344 7.732368469238281 43.35205841064453 9.384468078613281 44.08805847167969 C 10.86480712890625 44.74755859375 12.35353088378906 45.01655578613281 14.52301025390625 45.01655578613281 C 15.91947174072266 45.01655578613281 17.50242614746094 44.91269683837891 19.50653076171875 44.78121566772461 C 22.59561157226562 44.57853698730469 26.44004821777344 44.32631683349609 31.65155029296875 44.32631683349609 C 35.22411346435547 44.32631683349609 38.88475036621094 44.44311904907227 42.84271240234375 44.68341827392578 C 48.81536865234375 45.04601669311523 53.81864929199219 45.42691802978516 58.65721130371094 45.7952766418457 C 69.03231048583984 46.58513641357422 77.9925537109375 47.26727676391602 91.08209228515625 47.26727676391602 C 100.2635345458984 47.26727676391602 106.1044082641602 47.19619750976562 109.7914276123047 46.21117782592773 C 111.4017105102539 45.78097534179688 112.6023864746094 45.17073822021484 113.5700531005859 44.29075622558594 C 114.5205688476562 43.42633819580078 115.3409729003906 42.23947906494141 116.2301483154297 40.44243621826172 C 118.034553527832 36.79575729370117 120.0587692260742 30.32043647766113 120.5134506225586 24.07463645935059 C 120.8773498535156 19.07603645324707 120.375732421875 12.39757919311523 115.919548034668 8.967796325683594 C 111.2813720703125 5.397918701171875 110.1018524169922 5.009017944335938 107.4448699951172 5.009037017822266 C 106.7678909301758 5.009037017822266 105.9860534667969 5.039276123046875 105.0807495117188 5.074275970458984 C 103.7868728637695 5.124317169189453 102.1765670776367 5.186595916748047 100.1695098876953 5.186595916748047 C 96.91638946533203 5.186595916748047 93.45376586914062 5.022636413574219 89.58374786376953 4.685337066650391 C 83.32398986816406 4.139778137207031 78.88713073730469 3.525356292724609 74.97254943847656 2.983257293701172 C 68.94183349609375 2.148117065429688 64.17839050292969 1.488475799560547 55.70505142211914 1.488597869873047 M 55.70503234863281 -0.5114059448242188 C 69.86276245117188 -0.5116004943847656 73.9080810546875 1.311550140380859 89.75740814208984 2.692897796630859 C 99.84519195556641 3.572101593017578 104.3855285644531 3.009048461914062 107.4448776245117 3.009033203125 C 110.7135696411133 3.009014129638672 112.2916793823242 3.651718139648438 117.1394119262695 7.382877349853516 C 126.5243911743164 14.60621643066406 121.7767105102539 33.74259948730469 118.0227127075195 41.32941818237305 C 114.2687301635742 48.91623687744141 110.1833877563477 49.26727676391602 91.08209228515625 49.26727676391602 C 71.98078918457031 49.26727676391602 61.89228820800781 47.8436164855957 42.72151184082031 46.67973709106445 C 38.45798492431641 46.42089462280273 34.80608367919922 46.32630920410156 31.65154266357422 46.32630920410156 C 12.64315795898438 46.32630920410156 11.58274078369141 49.75531768798828 2.089569091796875 41.32941818237305 C -8.979011535644531 31.50519752502441 -2.769027709960938 8.298957824707031 2.089569091796875 2.692897796630859 C 6.089996337890625 -1.922939300537109 7.898468017578125 0.5432662963867188 25.13211059570312 0.5432662963867188 C 28.82923126220703 0.5432662963867188 33.23513793945312 0.4298248291015625 38.52615356445312 0.1085968017578125 C 45.72770690917969 -0.3286170959472656 51.22393035888672 -0.5113410949707031 55.70503234863281 -0.5114059448242188 Z"
                stroke="none"
                class="term-filter-bg"
              />
            </g>
          </svg>
        </div>
      </div>
    </template>
    <!-- Champ pour filtrer les résultats de la page -->
    <div v-if="champs_texte_pour_affiner" class="text-filter-container">
      <SearchLoop />
      <SearchBox />
      <input
        v-if="champs_texte_pour_affiner"
        type="text"
        v-model="userEntry"
        @input="$emit('filterElementsByKeyword', userEntry)"
        class="filter-input"
        placeholder="RECHERCHE"
      />
    </div>
  </div>
</template>

<style lang="scss" scoped>
.selects-container {
  color: black;
}
</style>
